# 管理系统项目说明

## 项目概述

本项目是一个企业级管理系统，包含后端Flask API服务和前端uni-app移动端应用。

## 项目结构

```
managepro/
├── backend/              # Flask后端服务
│   ├── app/             # 应用核心代码
│   │   ├── api/         # API接口
│   │   ├── models/      # 数据模型
│   │   ├── views/       # 视图函数
│   │   ├── utils/       # 工具函数
│   │   └── templates/   # 模板文件
│   ├── config.py        # 配置文件
│   ├── run.py           # 启动文件
│   └── requirements.txt # 依赖包
├── uniapp/              # uni-app前端应用
│   ├── pages/           # 页面文件
│   ├── components/      # 组件文件
│   ├── static/          # 静态资源
│   ├── utils/           # 工具函数
│   ├── api/             # API封装
│   ├── App.vue          # 应用入口
│   ├── main.js          # 主文件
│   ├── manifest.json    # 应用配置
│   └── pages.json       # 页面配置
├── mobile/              # 原始HTML移动端页面
├── docs/                # 文档
├── tests/               # 测试文件
├── scripts/             # 脚本文件
└── venv_new/           # Python虚拟环境
```

## 后端Flask服务

### 技术栈

- Python 3.8+
- Flask 2.0+
- SQLAlchemy (ORM)
- SQLite (默认数据库)
- JWT (认证)
- CORS (跨域支持)

### 启动服务

```bash
# 进入后端目录
cd backend

# 安装依赖
pip install -r requirements.txt

# 初始化数据库
python init_db.py

# 启动服务
python run.py
```

### 默认配置

- 服务地址: http://localhost:5000
- 数据库: SQLite (instance/app.db)
- 默认用户: admin / admin123

## 前端uni-app应用

### 技术栈

- uni-app (Vue.js)
- HBuilderX 开发工具
- Font Awesome 图标库

### 项目结构

```
uniapp/
├── pages/
│   ├── login/           # 登录页面
│   ├── dashboard/       # 仪表盘页面
│   ├── profile/         # 个人中心页面
│   └── vehicle/         # 办公用车页面
├── components/          # 自定义组件
├── static/              # 静态资源
├── utils/               # 工具函数
├── api/                 # API封装
├── App.vue             # 应用入口
├── main.js             # 主文件
├── manifest.json       # 应用配置
└── pages.json          # 页面配置
```

### 运行项目

1. 使用HBuilderX打开uniapp目录
2. 确保Flask后端服务已启动
3. 点击HBuilderX中的"运行"按钮
4. 选择运行平台（浏览器/H5、微信小程序等）

### 配置说明

在`uniapp/api/request.js`中配置后端地址：

```javascript
const BASE_URL = 'http://localhost:5000' // Flask后端地址
```

## API接口

### 认证接口

- `POST /api/login` - 用户登录
- `POST /api/logout` - 用户登出
- `POST /api/register` - 用户注册

### 用户管理接口

- `GET /api/users/me` - 获取当前用户信息
- `GET /api/users` - 获取用户列表
- `GET /api/users/<id>` - 获取指定用户信息
- `POST /api/users` - 创建用户
- `PUT /api/users/<id>` - 更新用户信息
- `DELETE /api/users/<id>` - 删除用户

## 数据库模型

### 核心模型

- User (用户)
- Role (角色)
- Permission (权限)
- Employee (员工)
- Department (部门)
- Material (物料)
- Customer (客户)
- Contract (合同)
- Vehicle (车辆)

## 部署说明

### 后端部署

1. 安装Python环境
2. 安装依赖: `pip install -r requirements.txt`
3. 初始化数据库: `python init_db.py`
4. 配置环境变量（可选）
5. 启动服务: `python run.py`

### 前端部署

1. 使用HBuilderX构建项目
2. 选择目标平台（H5、小程序等）
3. 配置后端API地址
4. 发布到对应平台

## 开发工具

### 后端开发

- Python 3.8+
- VS Code / PyCharm
- SQLite Browser (查看数据库)

### 前端开发

- HBuilderX
- 微信开发者工具（小程序调试）

## 测试

### 后端测试

运行测试套件：

```bash
cd backend
python -m pytest tests/
```

### API测试

使用`test_api.py`脚本测试API接口：

```bash
python test_api.py
```

## 常见问题

### CORS问题

确保Flask后端已正确配置CORS：

```python
from flask_cors import CORS
CORS(app, origins=['http://localhost:3000'], supports_credentials=True)
```

### 数据库问题

如果遇到数据库问题，可以重新初始化：

```bash
cd backend
rm -f instance/app.db
python init_db.py
```

### 登录问题

默认管理员账户：
- 用户名: admin
- 密码: admin123

## 项目维护

### 代码规范

- 后端遵循PEP8规范
- 前端遵循Vue.js风格指南
- 使用有意义的变量和函数命名
- 添加必要的注释和文档

### 版本控制

使用Git进行版本控制，主要分支：

- main: 主分支
- develop: 开发分支
- feature/*: 功能分支
- hotfix/*: 热修复分支

## 联系方式

如有问题，请联系项目维护者。